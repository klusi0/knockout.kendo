//knockout.kendo v0.1.0 | (c) 2012 Tomasz Miku≈õ | http://www.opensource.org/licenses/mit-license
(function(a,b,c){a.bindingHandlers.kendoAutoComplete={init:function(c,d,e,f){var g=b.extend({css:{},dataSource:[],dataTextField:null,dataValueField:null,enable:!0,event:{change:null,close:null,open:null,select:null},filter:"startswith",height:200,highlightFirst:!0,ignoreCase:!0,minLength:1,placeholder:"",separator:"",suggest:!1,value:null},d()),h=g.dataTextField==null?function(a){return a}:function(a){return a[g.dataTextField]},i=g.dataValueField==null?function(a){return a}:function(a){return a[g.dataValueField]},j=null,k=null,l=function(a){var b=k.total();for(var c=0;c<b;c++)if(i(k.at(c))==a){j.value(h(k.at(c)));break}},m=g.value,n=b(c);m!=null&&a.isObservable(m)&&(m.subscribe(function(a){l(a)}),m=m()),a.isObservable(g.dataSource)?(k=new kendo.data.DataSource({data:g.dataSource()}),g.dataSource.subscribe(function(a){k.cancelChanges();for(var b=0;b<a.length;b++)k.add(a[b]);l(m),j.popup.open()})):b.isArray(g.dataSource)?k=new kendo.data.DataSource({data:g.dataSource}):k=g.dataSource,j=n.kendoAutoComplete({dataSource:k,dataTextField:g.dataTextField,enable:g.enable,filter:g.filter,height:g.height,highlightFirst:g.highlightFirst,ignoreCase:g.ignoreCase,minLength:g.minLength,placeholder:g.placeholder,separator:g.separator,suggest:g.suggest}).data("kendoAutoComplete"),n.on("removing",function(){(j.popup.wrapper[0]?j.popup.wrapper:j.popup.element).remove(),j.element.show().insertBefore(j.wrapper),j.wrapper.remove(),j.element.removeData("kendoComboBox")}),l(m),g.value!=null&&a.isObservable(g.value)&&j.bind("select",function(a){a||g.value(null);var b=a.item[0],c=j.ul[0].children,d=c.length;for(var e=0;e<d;e++)if(b==c[e]){g.value(j._data()[e]);break}}),g.event.change!=null&&j.bind("change",g.event.change),g.event.close!=null&&j.bind("close",g.event.close),g.event.open!=null&&j.bind("open",g.event.open),g.event.select!=null&&j.bind("select",g.event.select);var o=b(j.element).parent();for(var p in g.css){var q=g.css[p];a.isObservable(q)?(q()?o.addClass(p):o.removeClass(p),q.subscribe(function(a){a?o.addClass(p):o.removeClass(p)})):q?o.addClass(p):o.removeClass(p)}}},a.bindingHandlers.kendoComboBox={init:function(c,d,e,f){var g=b.extend({animation:!1,css:{},dataSource:[],dataTextField:"",dataValueField:"",enable:!0,event:{change:null,close:null,open:null,select:null},filter:"startswith",height:500,highLightFirst:!0,ignoreCase:!0,minLength:1,placeholder:"",separator:"",suggest:!1,value:null},d()),h=g.dataTextField==null?function(a){return a}:function(a){return a[g.dataTextField]},i=g.dataValueField==null?function(a){return a}:function(a){return a[g.dataValueField]},j=null,k=null,l=g.value,m=function(a){j.value(a?a:l)};l!=null&&a.isObservable(l)&&(l.subscribe(function(a){j.value(l=a)}),l=l());var n=g.enable;a.isObservable(n)&&(n.subscribe(function(a){j.enable(a)}),n=g.enable()),a.isObservable(g.dataSource)?(k=new kendo.data.DataSource({data:g.dataSource()}),g.dataSource.subscribe(function(a){k.cancelChanges();for(var b=0;b<a.length;b++)k.add(a[b]);m()})):b.isArray(g.dataSource)?k=new kendo.data.DataSource({data:g.dataSource}):k=g.dataSource,j=b(c).kendoComboBox({animation:g.animation,dataSource:k,dataTextField:g.dataTextField,enable:n,filter:g.filter,height:g.height,highlightFirst:g.highlightFirst,ignoreCase:g.ignoreCase,minLength:g.minLength,placeholder:g.placeholder,separator:g.separator,suggest:g.suggest}).data("kendoComboBox"),m(),g.value!=null&&a.isObservable(g.value)&&(j.bind("select",function(a){a||g.value(null),g.value(i(this.dataItem(a.item.index())))}),j.bind("change",function(a){a||g.value(null),g.value(i(this.dataItem(this.selectedIndex)))})),g.event.change!=null&&j.bind("change",g.event.change),g.event.close!=null&&j.bind("close",g.event.close),g.event.open!=null&&j.bind("open",g.event.open),g.event.select!=null&&j.bind("select",g.event.select);var o=b(j.element).parent();for(var p in g.css){var q=g.css[p];a.isObservable(q)?(q()?o.addClass(p):o.removeClass(p),q.subscribe(function(a){a?o.addClass(p):o.removeClass(p)})):q?o.addClass(p):o.removeClass(p)}}},a.bindingHandlers.kendoDropDownList={init:function(c,d,e,f){var g=b.extend({animation:!1,css:{},dataSource:[],dataTextField:null,dataValueField:null,delay:500,enable:!0,event:{change:null,close:null,open:null,select:null},height:500,ignoreCase:!0,index:0,optionLabel:"",value:null},d()),h=g.dataTextField==null?function(a){return a}:function(a){return a[g.dataTextField]},i=g.dataValueField==null?function(a){return a}:function(a){return a[g.dataValueField]},j=null,k=null,l=g.value,m=function(a){j.value(a?a:l)};l!=null&&a.isObservable(l)&&(l.subscribe(function(a){j.value(l=a)}),l=l());var n=g.enable;a.isObservable(n)&&(n.subscribe(function(a){j.enable(a)}),n=n()),a.isObservable(g.dataSource)?(k=new kendo.data.DataSource({data:g.dataSource()}),g.dataSource.subscribe(function(a){k.cancelChanges();for(var b=0;b<a.length;b++)k.add(a[b]);m()})):b.isArray(g.dataSource)?k=new kendo.data.DataSource({data:g.dataSource}):k=g.dataSource,j=b(c).kendoDropDownList({animation:g.animation,dataSource:k,dataTextField:g.dataTextField,dataValueField:g.dataValueField,delay:g.delay,enable:n,height:g.height,ignoreCase:g.ignoreCase,index:g.index,optionLabel:g.optionLabel}).data("kendoDropDownList"),m(),g.value!=null&&a.isObservable(g.value)&&(j.bind("select",function(a){a||g.value(null),g.value(i(this.dataItem(a.item.index())))}),j.bind("change",function(a){a||g.value(null),g.value(i(this.dataItem(this.selectedIndex)))})),g.event.change!=null&&j.bind("change",g.event.change),g.event.close!=null&&j.bind("close",g.event.close),g.event.open!=null&&j.bind("open",g.event.open),g.event.select!=null&&j.bind("select",g.event.select);var o=b(j.element).parent();for(var p in g.css){var q=g.css[p];a.isObservable(q)?(q()?o.addClass(p):o.removeClass(p),q.subscribe(function(a){a?o.addClass(p):o.removeClass(p)})):q?o.addClass(p):o.removeClass(p)}}},a.bindingHandlers.kendoDatePicker={init:function(c,d,e,f){var g=b.extend({animation:!1,css:{},depth:"month",enable:!0,event:{change:null,close:null,open:null},format:"MM/dd/yyyy",max:new Date(2099,11,31),min:new Date(1900,0,1),start:"month",value:null},d()),h=null,i=g.value;i!=null&&a.isObservable(i)&&(i.subscribe(function(a){h.value(a)}),i=i());var j=g.enable;a.isObservable(j)&&(j.subscribe(function(a){h.enable(a)}),j=g.enable()),h=b(c).kendoDatePicker({animation:g.animation,depth:g.depth,format:g.format,max:g.max,min:g.min,start:g.start,value:i}).data("kendoDatePicker"),g.value!=null&&a.isObservable(g.value)&&h.bind("change",function(a){a||g.value(null),g.value(this.value())}),g.event.change!=null&&h.bind("change",g.event.change),g.event.close!=null&&h.bind("close",g.event.close),g.event.open!=null&&h.bind("open",g.event.open);var k=b(h.element).parent();for(var l in g.css){var m=g.css[l];a.isObservable(m)?(m()?k.addClass(l):k.removeClass(l),m.subscribe(function(a){a?k.addClass(l):k.removeClass(l)})):m?k.addClass(l):k.removeClass(l)}}}})(ko,jQuery)